"0","#| label: task4-format"
"0","#| message: false"
"0","library(readxl)"
"0",""
"0","# 0 Get the official World Bank country names from the GDP sheet"
"0","wb_names <- read_excel("
"0","  ""data/task1/API_NY.GDP.PCAP.CD_DS2_en_excel_v2_85284.xls"","
"0","  sheet = ""Data"","
"0","  skip  = 3"
"0",") |>"
"0","  select(code = `Country Code`,"
"0","         name = `Country Name`)"
"0",""
"0","# 1 Bring continent + indicators together"
"0","world_formatted <- world_countries |>"
"0","  select(-name) |>                       # discard codelist name"
"0","  left_join(wb_names, by = ""code"") |>    # add WB‑official name"
"0","  relocate(name, code, continent) |>"
"0","  transmute(                             # keep / rename columns"
"0","    name,"
"0","    code,"
"0","    gdp_per_cap = gdp_per_capita,"
"0","    life_exp,"
"0","    pop,"
"0","    continent"
"0","  ) |>"
"0","  drop_na() |>                           # remove any remaining NAs"
"0","  filter(!code %in% c(""CHI"", ""XKX"")) |>  # drop Channel Islands & Kosovo"
"0","  arrange(name)                          # alphabetical"
"0",""
"0","nrow(world_formatted)                    # prints 209"
"1","[1] 209
"
"0","world_formatted"
